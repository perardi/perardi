(function(){"use strict";function t(){this.s={}}function e(t,e){this.g=t,this.T=e,this.C=this.H.bind(this)}var i,n=function(t,e){if(t.contains&&1==e.nodeType)return t==e||t.contains(e);if(void 0!==t.compareDocumentPosition)return t==e||!!(16&t.compareDocumentPosition(e));for(;e&&t!=e;)e=e.parentNode;return e==t},s=function(t){return"gwd-page"==t.tagName.toLowerCase()||"gwd-page"==t.getAttribute("is")},r=function(t){if(s(t))return t;for(;t&&9!=t.nodeType;)if((t=t.parentElement)&&s(t))return t;return null},o=function(t,e,i){if(i){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,i)}else n=document.createEvent("Event"),n.initEvent(t,!0,!0);return e.dispatchEvent(n),n};t.prototype.add=function(t,e){t="string"==typeof t?t:t.getString(),this.s[t]||(this.s[t]=[]),this.s[t].push(e)};var a=function(t){var e=[],i="object"==typeof gwd&&"GwdId"in gwd,n;for(n in t.s)e.push(i?new gwd.GwdId(n):n);return e},d=function(t,e){return e?t.s["string"==typeof e?e:e.getString()]||[]:[]};e.prototype.observe=function(t){if(t.nodeType==Node.ELEMENT_NODE)for(var e=a(this.g),i=0;i<e.length;i++){var s=u(e[i]);if(s&&n(t,s)){var r=d(this.g,e[i]);r&&r.forEach(function(t){s.addEventListener(t.event,this.C,!1)}.bind(this))}}};var h=function(t,e){if(e.nodeType==Node.ELEMENT_NODE)for(var i=a(t.g),s=0;s<i.length;s++){var r=u(i[s]);if(r&&n(e,r)){var o=d(t.g,i[s]);o&&o.forEach(function(t){r.removeEventListener(t.event,this.C,!1)}.bind(t))}}};e.prototype.H=function(t){this.T(t)};var u=function(t){return"string"==typeof t?document.getElementById(t):t.getElement(document)};document.registerElement("gwd-metric-event"),document.registerElement("gwd-metric-configuration"),document.registerElement("gwd-exit"),document.registerElement("gwd-timer");var l=function(){};goog.inherits(l,HTMLElement),i=l.prototype,i.createdCallback=function(){document.body.style.opacity="0",this.N=this.$.bind(this),this.F=this.ba.bind(this),this.O=this.aa.bind(this),this.w=this.Z.bind(this),this.v=this.X.bind(this),this.A=o.bind(null,"expandfinish",this),this.u=o.bind(null,"collapsefinish",this),this.M=this.Y.bind(this),this.C=this.H.bind(this),this.R=this.ca.bind(this),this.S=this.da.bind(this),this.f=null,this.m=this.o=!1,this.I=[],this.l=!1,this.J=this.hasAttribute("fullscreen"),this.j=null,this.B=this.h=!1,this.D=window.innerHeight>=window.innerWidth?1:2,this.L=this.b=null},i.attachedCallback=function(){Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,this.w),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,this.v),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.w),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.v),Enabler.addEventListener(studio.events.StudioEvent.EXPAND_FINISH,this.A),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,this.u),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_FINISH,this.A),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_FINISH,this.u),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_DIMENSIONS,this.M),this.a=this.querySelector("[is=gwd-pagedeck]"),this.a.addEventListener("pagetransitionend",this.R,!1),this.b=document.getElementById(this.getAttribute("data-provider")),this.L=document.getElementById(this.getAttribute("data-provider"));var i=this.querySelector("gwd-metric-configuration"),n=new t;if(i){i=Array.prototype.slice.call(i.getElementsByTagName("gwd-metric-event"));for(var s=0;s<i.length;s++){var r=i[s],o=r.getAttribute("source");if(o){var a=r.getAttribute("exit");r={event:r.getAttribute("event"),ea:r.getAttribute("metric")||a,U:r.hasAttribute("cumulative"),exit:a},n.add(v(o),r)}}}this.g=n,this.P=new e(this.g,this.C),window.addEventListener("resize",this.S,!1)},i.detachedCallback=function(){Enabler.removeEventListener(studio.events.StudioEvent.INIT,this.N),Enabler.removeEventListener(studio.events.StudioEvent.VISIBLE,this.F),Enabler.removeEventListener(studio.events.StudioEvent.PAGE_LOADED,this.O),Enabler.removeEventListener(studio.events.StudioEvent.EXPAND_START,this.w),Enabler.removeEventListener(studio.events.StudioEvent.COLLAPSE_START,this.v),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.w),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.v),Enabler.removeEventListener(studio.events.StudioEvent.EXPAND_FINISH,this.A),Enabler.removeEventListener(studio.events.StudioEvent.COLLAPSE_FINISH,this.u),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_FINISH,this.A),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_FINISH,this.u),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_DIMENSIONS,this.M),this.a.removeEventListener("pagetransitionend",this.R,!1),window.removeEventListener("resize",this.S,!1),this.b&&this.f&&this.b.removeEventListener("ready",this.f)},i.initAd=function(){this.l=!1;var t=this.N;Enabler.removeEventListener(studio.events.StudioEvent.INIT,t),Enabler.addEventListener(studio.events.StudioEvent.INIT,t),Enabler.isInitialized()&&t()},i.exit=function(t,e,i,n,s){Enabler.exit(t,e),(void 0===n||n)&&c(this),i&&this.goToPage(s)},i.exitOverride=function(t,e,i,n,s){Enabler.exitOverride(t,e),(void 0===n||n)&&c(this),i&&this.goToPage(s)},i.incrementCounter=function(t,e){Enabler.counter(t,e)},i.startTimer=function(t){Enabler.startTimer(t)},i.stopTimer=function(t){Enabler.stopTimer(t)},i.reportManualClose=function(){Enabler.reportManualClose()},i.H=function(t){var e=t.target,i=v(e),n=i+": "+t.type;t:{for(var s=d(this.g,i),o=0;o<s.length;o++)if(s[o].event==t.type){s=s[o];break t}s=void 0}s.exit&&t.detail&&t.detail.url?(n=i+": "+s.exit,t.detail["exit-id"]&&(n=t.detail["exit-id"]),e="",null!=t.detail["product-index"]&&(e=t.detail["product-index"]),this.b&&"dynamic_remarketing"==this.L.getAttribute("gwd-schema-id")?(i=t.detail["action-event"],s={},i&&(s.clickX=i.clientX||i.changedTouches[0].clientX,s.clickY=i.clientY||i.changedTouches[0].clientY),Enabler.dynamicExit(n,t.detail.url,e,void 0,s)):Enabler.exitOverride(n,t.detail.url),t.detail.handled=!0,t.detail.collapse&&this.goToPage()):(t=r(e))&&t.gwdIsActive()&&this.incrementCounter(s.ea||n,s.U)},i.$=function(){var t=function(){if(this.hasAttribute("polite-load")){var t=this.O;Enabler.isPageLoaded()?t():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,t)}else t=this.F,Enabler.isVisible()?t():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,t)}.bind(this);if(this.J){var e=function(i){(this.j=!!i.supported)&&o("fullscreensupport",this),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,e),t()}.bind(this);Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,e),Enabler.queryFullscreenSupport()}else t()},i.ba=function(t){if(this.l)this.b&&E(this);else{if(t)var e=t.detail;var i=this.ha.bind(this,e);if(this.b&&(i=this.W.bind(this,i)),this.J){Enabler.setResponsiveExpanding(!0);var n=function(t){this.B=t,i()}.bind(this);Enabler.loadModule(studio.module.ModuleId.GDN,function(){var t=studio.sdk.gdn.getConfig();t.isInCreativeToolsetContext()?t.isInterstitial(n):i()})}else i()}},i.aa=function(){var t=this.F;Enabler.isVisible()?t():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,t)},i.W=function(t){this.b?(this.f&&this.b.removeEventListener("ready",this.f),this.f=this.fa.bind(this,t),this.b.isDataLoaded()&&this.f(),this.b.addEventListener("ready",this.f)):t()},i.fa=function(t){E(this),t()};var E=function(t){var e=document.getElementsByTagName("gwd-data-binder");if(0<e.length){e=e[0];var i=t.b.getData();if(i){var n=t.a.getElementsBySelector("*");n=n.concat(t.a.getPages()),e.bindData(i,n),t.l&&(t=document.getElementsByTagName("gwd-text-helper"),0<t.length&&t[0].refitAll())}}};i=l.prototype,i.ha=function(t){this.l||(this.l=!0,document.body.style.opacity="",o("adinitialized",this,t),this.B?(t=this.a.getPage(this.a.findPageIndexByAttributeValue("expanded",!0)),this.goToPage(t.id)):this.goToPage())},i.goToPage=function(t,e,i,n,s){var r=this.a.getPage(this.a.currentIndex);if(t=t?this.a.getPage(t):this.a.getDefaultPage()){var o=!!r&&!!t&&!this.o&&!this.B&&!r.hasAttribute("expanded")&&t.hasAttribute("expanded");r=!!r&&!!t&&!this.m&&!this.B&&r.hasAttribute("expanded")&&!t.hasAttribute("expanded"),o&&this.m||r&&this.o||(this.c=t.id,e&&(this.i={transition:e,duration:i,V:n,direction:s}),o?this.J&&!1!==this.j?this.j&&(this.h=!0,Enabler.requestFullscreenExpand()):Enabler.requestExpand():r?this.h?Enabler.requestFullscreenCollapse():Enabler.requestCollapse():(this.m=this.o=!1,this.G()))}},i.Z=function(){if(o("expandstart",this),this.j?(this.h=!0,Enabler.finishFullscreenExpand()):Enabler.finishExpand(),!this.c){var t=this.a.getPage(this.a.findPageIndexByAttributeValue("expanded",!0));t&&(this.c=t.id)}t=this.a.getPage(this.a.currentIndex),this.o=!!t&&this.c!=t.id,setTimeout(this.G.bind(this),30)},i.X=function(){o("collapsestart",this),this.h?(Enabler.finishFullscreenCollapse(),this.h=!1):Enabler.finishCollapse(),this.c||(this.reportManualClose(),this.c=this.a.getDefaultPage().id);var t=this.a.getPage(this.a.currentIndex);this.m=!!t&&this.c!=t.id,setTimeout(this.G.bind(this),30)},i.da=function(){if(!this.c){var t=window.innerHeight>=window.innerWidth?1:2;this.D!=t&&(this.D=t,(t=this.a.getPage(this.a.currentIndex))&&setTimeout(this.goToPage.bind(this,t.id),0))}},i.Y=function(t){t&&Enabler.setResponsiveSize(t.width,t.height)},i.G=function(){if(this.c){this.D=window.innerHeight>=window.innerWidth?1:2;var t=this.a.getOrientationSpecificPage(this.D,this.c);this.i?this.a.goToPage(t.id,this.i.transition,this.i.duration,this.i.V,this.i.direction):this.a.goToPage(t.id),this.h&&t.classList.add("fs")}this.i=this.c=void 0},i.ca=function(t){if(this.m=this.o=!1,t.target==this.a){var e=t.detail;if(t=e.outgoingPage,e=e.incomingPage,t&&(h(this.P,t),(t=t.querySelectorAll("video"))&&0<t.length))for(this.K=[];this.I.length;)studio.video.Reporter.detach(this.I.shift());if(this.P.observe(e),(t=e.querySelectorAll("video"))&&0<t.length){e=studio.video&&studio.video.Reporter;var i=this.ga.bind(this);this.K=Array.prototype.slice.call(t),e?i():Enabler.loadModule(studio.module.ModuleId.VIDEO,i)}}},i.ga=function(){for(var t,e;this.K.length;)e=this.K.shift(),(t=v(e))&&(studio.video.Reporter.attach(t,e,e.autoplay),this.I.push(t))};var v=function(t){return"object"==typeof gwd&&"GwdId"in gwd?new gwd.GwdId(t).getString():"string"==typeof t?t:t.id},c=function(t){Array.prototype.slice.call(t.a.querySelectorAll("video, gwd-youtube, audio")).forEach(function(t){t.pause()})};l.prototype.attributeChangedCallback=function(){},document.registerElement("gwd-doubleclick",{prototype:l.prototype})}).call(this);