(function(){"use strict";var t=function(t){return"gwd-page"==t.tagName.toLowerCase()||"gwd-page"==t.getAttribute("is")},e=function(e){if(t(e))return e;for(;e&&9!=e.nodeType;)if((e=e.parentElement)&&t(e))return e;return null},i=function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),e.dispatchEvent(i)},s=function(){};goog.inherits(s,HTMLImageElement),s.prototype.createdCallback=function(){this.f=this.g.bind(this),this.a=0,this.b=this.c=-1,Object.defineProperty(this,"assetWidth",{enumerable:!0,get:function(){return this.c}}),Object.defineProperty(this,"assetHeight",{enumerable:!0,get:function(){return this.b}});var t=this.getAttribute("src");t&&(this.setAttribute("source",t),this.removeAttribute("src")),this.addEventListener("load",this.f,!1),this.addEventListener("error",this.f,!1)},s.prototype.attachedCallback=function(){if("function"==typeof this.gwdLoad&&"function"==typeof this.gwdIsLoaded&&!this.gwdIsLoaded()){var t=e(this),i=t&&"function"==typeof t.gwdIsLoaded;(!t||i&&t.gwdIsLoaded())&&this.gwdLoad()}},s.prototype.gwdIsLoaded=function(){return 2==this.a||3==this.a},s.prototype.gwdLoad=function(){var t=this.getAttribute("source");t?(this.a=1,this.setAttribute("src",t)):i("load",this)},s.prototype.g=function(t){t&&"error"==t.type?(this.a=3,this.b=this.c=-1):(-1!=this.c&&-1!=this.b||!this.getAttribute("source")||(this.c=this.naturalWidth,this.b=this.naturalHeight),this.a=2),n(this),r(this),i("ready",this)};var r=function(t){if(2==t.a){var e=t.getAttribute("source"),i=t.getAttribute("scaling")||"stretch";e&&("stretch"!=i?(t.classList.add("scaled-proportionally"),t.style.backgroundImage="url("+JSON.stringify(e)+")",t.style.backgroundSize="none"!=i?i:"auto","data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="!=t.getAttribute("src")&&t.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")):(t.classList.remove("scaled-proportionally"),t.style.backgroundImage="",e!=t.getAttribute("src")&&t.setAttribute("src",e)))}},n=function(t){var e=t.getAttribute("alignment")||"center";t.style.backgroundPosition=e};s.prototype.attributeChangedCallback=function(t){"source"==t&&0!==this.a&&this.gwdLoad(),"scaling"==t&&r(this),"alignment"==t&&n(this)},document.registerElement("gwd-image",{prototype:s.prototype,extends:"img"})}).call(this);